{#- This macro is for interal use within GOV.UK Frontend. It isn't intended for
external use and may receive undocumented breaking changes in non-breaking
releases of Frontend. #}

{% from "./attributes.njk" import govukAttributes %}

{% macro govukLogo(params) %}
  {#- Default options #}
  {%- set useLogotype = params.useLogotype | default(true) %}

  {#- Calculate how wide the logo needs to be for the given parameters.
      The new SVG ViewBox is '0 0 323.9 60'.
      The height is fixed at 30px (display), which is 0.5x the ViewBox height (60).
      Therefore, display width = ViewBox Width / 2.
  #}
  {%- set svgWidth = 36 %} {# Crown only (approximate crop of the left side) #}
  {%- set svgWidth = 162 if useLogotype else svgWidth %} {# Full Logo (323.9 / 2) #}

  {#-
    The SVG content is split into the Crown and the Logotype text.
    Both share the root coordinate transform matrix from the source SVG.
  #}
  {%- set _tudorCrown %}
    <g transform="matrix(.0629 0 0 .06606 1660.447998 -33.511482)" style="transform-origin:-1628.82px 9.71029px">
      <g transform="matrix(1.895028 0 0 1.818227 -2147.4856861 371.2117424)">
        <path fill="none" stroke="currentColor" stroke-width="10" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" d="M117.256 109.663h268.593v241.349c.129.848 1.666 16.246-7.188 25.893-10.578 11.525-19.727 3.643-83.598 10.008-35.496 3.538-41.376 25.307-44.98 24.542-1.994-.423.54-23.697-66.112-24.8-48.422-.801-43.021-1.581-56.018-5.24-13.881-3.908-10.697-30.403-10.697-30.403V109.663Z"/>
        <path fill="currentColor" d="M118.014 110.187h100.213v102.44H118.014zm169.548-.484h100.213v102.44H287.562zM118.571 281.179h100.213v110.123s-87.014 2.122-98.85-13.22c-11.655-15.108-1.363-96.903-1.363-96.903Z"/>
        <path fill="currentColor" d="m291.897 390.142 94.452-1.087.549-108.795s-81.222 3.988-93.919 13.693c-13.027 9.957-1.082 96.189-1.082 96.189Z" transform="rotate(180 336.896 335.201)"/>
        <path fill="currentColor" d="M171.638 457.487c16.327 5.635 32 13.745 48.981 16.906 4.057.755 13.897-2.843 10.966-5.748-6.388-6.332-17.018-5.829-25.542-8.699-12.07-4.064-25.428-5.371-36.24-12.102-14.403-8.967-23.822-24.49-37.854-34.028-10.952-7.444-19.843-11.128-32.39-15.363-7.73-2.609-11.91-2.883-27.49-6.927-2.199-.571-15.631-6.565-15.89-5.62-.465 1.701 2.888 14.871 4.215 17.242 7.21 12.886 10.251 16.869 20.706 27.297 12.262 12.23 16.96 21.624 41.959 30.641"/>
        <path fill="currentColor" d="M82.758 311.007c14.57-.15 27.042-9.03 41.733-10.927 2.43-.314-.01 7.317-1.161 9.481-1.053 1.98-7.898 1.204-9.708 2.528-3.347 2.448-6.15 5.567-9.132 8.449-11.423 11.041-20.951 24.372-34.078 33.319-20.227 13.786-41.671 18.357-65.228 16.706-6.102-.428-12.993-.689-17.796-4.475-2.709-2.136 8.602-7.081 12.885-10.644 15.523-12.913 30.38-29.022 46.985-33.542" transform="rotate(90 54.162 325.079)"/>
        <path fill="currentColor" d="M133.9 362.213c14.798-.134 27.466-8.027 42.387-9.714 2.468-.279-.01 6.504-1.179 8.428-1.07 1.761-8.022 1.071-9.86 2.248-3.4 2.176-6.247 4.948-9.275 7.511-11.602 9.814-21.279 21.664-34.612 29.618-20.544 12.255-42.323 16.319-66.249 14.851-6.198-.381-13.197-.613-18.075-3.979-2.751-1.898 8.737-6.294 13.087-9.461 15.766-11.479 30.855-25.799 47.72-29.817" style="transform-origin:104.857px 374.722px" transform="rotate(90 0 0)"/>
        <path fill="currentColor" d="M106.234 226.098c18.225 2.394 41.714 14.905 61.444 22.911 2.078.843-4.667 5.284-6.554 5.706-5.533 1.239-17.714-7.719-23.97-5.692-24.718 8.008-27.139 23.826-57.154 17.846-16.413-3.27-30.891-11.54-45.921-18.902-6.249-3.061-11.966-7.112-17.796-10.911-2.788-1.817 13.07-4.588 19.857-5.817 17.334-3.14 35.457-6.519 51.23-7.822" style="transform-origin:83.057px 196.047px" transform="rotate(90 0 0)"/>
        <path fill="currentColor" d="M136.453 304.522c10.39 5.129 17.083 11.092 27.715 16.06.672.314-3.231 8.401-6.296 7.121-6.819-2.848-16.875-9.678-24.194-10.698-7.297-1.017-13.222 3.025-20.416 1.438-15.769-3.479-30.976-8.672-45.602-15.516-14.437-6.755-19.891-14.193-18.7-14.607 1.552-.539 11.146-3.732 22.546-4.455 12.73-.807 33.373-1.548 45.623 3.12" style="transform-origin:116.319px 247.621px" transform="rotate(90 0 0)"/>
        <path fill="currentColor" d="M181.504 184.898c12.965 12.082 29.413 23.642 40.185 35.327 1.901 2.062-8.957 2.675-11.207 1-3.654-2.72-12.609-8.778-18.919-10.353-18.701-4.666-33.072.543-50.571-7.536-11.519-5.318-24.331-21.002-32.416-30.78-6.068-7.339-12.488-14.768-16.176-23.547-.741-1.764 13.369.216 19.857 1.635 13.297 2.909 29.843 4.032 41.451 10.558" style="transform-origin:160.47px 110.916px" transform="rotate(90 0 0)"/>
        <path fill="currentColor" d="M265.233 157.327c3.936 13.447.886 34.089 4.72 50.583 2.124 9.135 11.805 15.708 12.856 25.028.377 3.34-7.587 1.865-10.077-.393-9.819-8.905-17.043-20.344-24.71-31.157-7.617-10.742-16.595-21.031-21.075-33.414-4.378-12.1-2.434-25.659-4.868-38.294-1.532-7.952-4.704-15.499-6.993-23.268-.737-2.503 12.164 3.478 17.352 6.922 7.825 5.194 16.719 8.874 21.139 18.628" style="transform-origin:281.208px 69.71px" transform="rotate(90 0 0)"/>
        <path fill="currentColor" d="M385.634 403.17c16.327-5.635 32-13.745 48.981-16.906 4.057-.755 13.897 2.843 10.966 5.748-6.388 6.332-17.018 5.829-25.542 8.699-12.07 4.064-25.428 5.371-36.24 12.102-14.403 8.967-23.822 24.49-37.854 34.028-10.952 7.444-19.843 11.128-32.39 15.363-7.73 2.609-11.91 2.883-27.49 6.927-2.199.571-15.631 6.565-15.89 5.62-.465-1.701 2.888-14.871 4.215-17.242 7.21-12.886 10.251-16.869 20.706-27.297 12.262-12.23 16.96-21.624 41.959-30.641" style="transform-box:fill-box;transform-origin:50% 50%" transform="rotate(180 0 0)"/>
        <path fill="currentColor" d="M485.194 351.815c14.679.149 27.244 8.963 42.045 10.846 2.449.312-.01-7.263-1.169-9.411-1.061-1.965-7.957-1.195-9.781-2.509-3.372-2.43-6.196-5.525-9.2-8.386-11.509-10.959-21.108-24.191-34.333-33.071-20.379-13.684-41.983-18.221-65.717-16.582-6.147.425-13.09.684-17.929 4.442-2.729 2.12 8.666 7.028 12.981 10.564 15.64 12.817 30.608 28.807 47.337 33.293" style="transform-box:fill-box;transform-origin:50% 50%" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M426.656 387.495c14.909.133 27.672 7.968 42.705 9.642 2.486.277-.011-6.455-1.188-8.365-1.078-1.748-8.082-1.063-9.934-2.231-3.426-2.16-6.294-4.912-9.345-7.456-11.688-9.741-21.438-21.503-34.871-29.398-20.697-12.164-42.639-16.197-66.745-14.74-6.244.378-13.295.608-18.21 3.949-2.772 1.884 8.802 6.247 13.185 9.391 15.884 11.394 31.086 25.607 48.077 29.595" style="transform-origin:397.396px 375.079px" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M442.546 166.576c18.362-2.376 42.027-14.794 61.904-22.74 2.094-.837-4.701-5.245-6.603-5.664-5.574-1.23-17.846 7.662-24.149 5.65-24.903-7.949-27.342-23.649-57.582-17.714-16.536 3.246-31.122 11.455-46.265 18.762-6.296 3.038-12.055 7.059-17.929 10.83-2.809 1.803 13.168 4.554 20.006 5.774 17.463 3.116 35.722 6.47 51.613 7.764" style="transform-origin:419.196px 196.404px" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M406.218 191.5c10.468-5.091 17.211-11.009 27.923-15.941.677-.311-3.255-8.338-6.343-7.068-6.87 2.827-17.001 9.606-24.375 10.619-7.352 1.009-13.321-3.003-20.569-1.427-15.887 3.453-31.208 8.607-45.944 15.4-14.545 6.705-20.039 14.088-18.84 14.499 1.564.535 11.23 3.704 22.715 4.422 12.826.801 33.623 1.536 45.965-3.097" style="transform-origin:385.934px 247.978px" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M362.974 37.841c13.062-11.992 29.633-23.466 40.486-35.065 1.915-2.046-9.024-2.655-11.291-.992-3.681 2.7-12.703 8.713-19.06 10.276-18.841 4.631-33.32-.539-50.95 7.48-11.605 5.278-24.513 20.846-32.659 30.551-6.113 7.285-12.581 14.659-16.297 23.372-.746 1.751 13.469-.214 20.006-1.623 13.396-2.887 30.066-4.002 41.761-10.479" style="transform-origin:341.783px 111.273px" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M204.95-16.899c3.966-13.347.893-33.835 4.756-50.207 2.139-9.067 11.893-15.591 12.952-24.842.38-3.315-7.644-1.851-10.153.39-9.892 8.839-17.17 20.193-24.895 30.926-7.674 10.662-16.719 20.874-21.232 33.165-4.411 12.01-2.453 25.469-4.905 38.01-1.543 7.893-4.739 15.384-7.045 23.095-.743 2.484 12.255-3.452 17.482-6.871 7.883-5.155 16.844-8.808 21.297-18.489" style="transform-origin:221.045px 70.067px" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
        <path fill="currentColor" d="M277.51 477.753c16.327 5.635 32 13.745 48.981 16.906 4.057.755 13.897-2.843 10.966-5.748-6.388-6.332-17.018-5.829-25.542-8.699-12.07-4.064-25.428-5.371-36.24-12.102-14.403-8.967-23.822-24.49-37.854-34.028-10.952-7.444-19.843-11.128-32.39-15.363-7.73-2.609-11.91-2.883-27.49-6.927-2.199-.571-15.631-6.565-15.89-5.62-.465 1.701 2.888 14.871 4.215 17.242 7.21 12.886 10.251 16.869 20.706 27.297 12.262 12.23 16.96 21.624 41.959 30.641" style="transform-box:fill-box;transform-origin:50% 50%"/>
        <path fill="currentColor" d="M277.511 427.189c16.327-5.635 32-13.745 48.981-16.906 4.057-.755 13.897 2.843 10.966 5.748-6.388 6.332-17.018 5.829-25.542 8.699-12.07 4.064-25.428 5.371-36.24 12.102-14.403 8.967-23.822 24.49-37.854 34.028-10.952 7.444-19.843 11.128-32.39 15.363-7.73 2.609-11.91 2.883-27.49 6.927-2.199.571-15.631 6.565-15.89 5.62-.465-1.701 2.888-14.871 4.215-17.242 7.21-12.886 10.251-16.869 20.706-27.297 12.262-12.23 16.96-21.624 41.959-30.641" style="transform-origin:250.001px 454.526px" transform="rotate(180 0 0)"/>
      </g>
    </g>
  {%- endset %}

  {%- set _logotype %}
    <g transform="matrix(.0629 0 0 .06606 1660.447998 -33.511482)" style="transform-origin:-1628.82px 9.71029px">
      <g style="transform-origin:98.059px 154.655px" transform="matrix(17.275316 0 0 16.452034 774.968811 758.135681)">
        <circle cx="125.38" cy="169.57" r="7.3" class="govuk-logo-dot" fill="currentColor"/>
        <path fill="currentColor" d="M9.659 176.87c-4.276 0-8.025-.989-11.247-2.966-3.222-1.978-5.732-4.79-7.529-8.437-1.798-3.647-2.696-7.97-2.696-12.967 0-5.061.909-9.416 2.727-13.063 1.819-3.647 4.318-6.454 7.498-8.421 3.18-1.967 6.812-2.951 10.895-2.951 2.553 0 4.93.378 7.131 1.133 2.202.755 4.169 1.824 5.902 3.206 1.734 1.382 3.17 3.03 4.307 4.944 1.138 1.914 1.92 4.03 2.345 6.348h-6.987c-.446-1.467-1.053-2.775-1.818-3.923-.766-1.149-1.686-2.138-2.76-2.968-1.074-.829-2.281-1.461-3.621-1.897-1.34-.436-2.818-.654-4.434-.654-2.723 0-5.185.696-7.387 2.09-2.201 1.392-3.94 3.444-5.216 6.156-1.276 2.711-1.914 6.045-1.914 10 0 3.891.643 7.187 1.93 9.888 1.287 2.701 3.047 4.759 5.28 6.172 2.234 1.415 4.775 2.122 7.625 2.122 2.595 0 4.877-.542 6.844-1.627 1.967-1.084 3.493-2.621 4.578-4.609 1.085-1.988 1.628-4.333 1.628-7.034l1.849.351H10.807v-5.709h18.537v5.358c0 3.977-.846 7.422-2.537 10.335-1.691 2.914-4.014 5.163-6.971 6.747-2.956 1.584-6.349 2.376-10.177 2.376Zm47.63 0c-4.084 0-7.732-.978-10.943-2.934-3.212-1.957-5.743-4.759-7.593-8.406-1.851-3.647-2.777-7.99-2.777-13.03 0-5.061.926-9.416 2.777-13.063 1.85-3.647 4.381-6.454 7.593-8.421 3.211-1.967 6.859-2.951 10.943-2.951s7.726.984 10.927 2.951c3.201 1.967 5.727 4.774 7.577 8.421 1.851 3.647 2.776 8.002 2.776 13.063 0 5.04-.925 9.383-2.776 13.03-1.85 3.647-4.376 6.449-7.577 8.406-3.201 1.956-6.843 2.934-10.927 2.934Zm0-6.188c2.765 0 5.248-.696 7.45-2.089 2.201-1.393 3.945-3.446 5.232-6.157 1.287-2.711 1.93-6.023 1.93-9.936 0-3.955-.643-7.289-1.93-10-1.287-2.712-3.031-4.764-5.232-6.156-2.202-1.394-4.685-2.09-7.45-2.09-2.765 0-5.254.702-7.466 2.105-2.212 1.404-3.961 3.461-5.249 6.172-1.286 2.712-1.929 6.034-1.929 9.969 0 3.913.643 7.22 1.929 9.92 1.288 2.701 3.037 4.753 5.249 6.157 2.212 1.403 4.701 2.105 7.466 2.105Zm40.478 5.55-17.324-47.528h7.242l9.571 27.177c.66 1.872 1.425 4.232 2.297 7.081.872 2.85 1.872 6.264 2.999 10.24h-1.372c1.128-4.083 2.122-7.523 2.984-10.32.861-2.796 1.6-5.129 2.217-7.001l9.316-27.177h7.274l-17.101 47.528h-8.103Zm61.501.638c-4.276 0-8.025-.989-11.247-2.966-3.223-1.978-5.732-4.79-7.529-8.437-1.798-3.647-2.697-7.97-2.697-12.967 0-5.061.91-9.416 2.728-13.063 1.819-3.647 4.318-6.454 7.498-8.421 3.18-1.967 6.811-2.951 10.895-2.951 2.553 0 4.93.378 7.131 1.133 2.202.755 4.169 1.824 5.902 3.206 1.734 1.382 3.17 3.03 4.307 4.944 1.138 1.914 1.92 4.03 2.345 6.348h-6.987c-.447-1.467-1.053-2.775-1.818-3.923-.766-1.149-1.686-2.138-2.76-2.968-1.074-.829-2.281-1.461-3.621-1.897-1.34-.436-2.819-.654-4.435-.654-2.722 0-5.185.696-7.386 2.09-2.201 1.392-3.94 3.444-5.216 6.156-1.276 2.711-1.914 6.045-1.914 10 0 3.891.643 7.187 1.93 9.888 1.287 2.701 3.047 4.759 5.28 6.172 2.233 1.415 4.775 2.122 7.625 2.122 2.595 0 4.876-.542 6.844-1.627 1.967-1.084 3.493-2.621 4.577-4.609 1.086-1.988 1.628-4.333 1.628-7.034l1.85.351h-13.782v-5.709h18.536v5.358c0 3.977-.845 7.422-2.536 10.335-1.691 2.914-4.014 5.163-6.971 6.747-2.957 1.584-6.349 2.376-10.177 2.376Zm28.041-.638v-47.528h16.718c3.679 0 6.731.632 9.156 1.897 2.424 1.266 4.232 3.015 5.424 5.248 1.191 2.232 1.786 4.795 1.786 7.687 0 2.892-.601 5.428-1.803 7.608-1.201 2.18-3.009 3.881-5.423 5.104-2.414 1.223-5.472 1.834-9.173 1.834h-12.826v-5.869h12.316c2.403 0 4.344-.351 5.822-1.053 1.479-.702 2.558-1.701 3.239-2.999.68-1.297 1.02-2.839 1.02-4.625 0-1.85-.34-3.44-1.02-4.769-.681-1.329-1.765-2.365-3.254-3.11-1.489-.744-3.446-1.116-5.871-1.116h-9.316v41.691h-6.795Zm27.15 0-11.486-21.436h7.53l11.708 21.436h-7.752Z" />
      </g>
    </g>
  {%- endset %}

  {#- The SVG needs `focusable="false"` so that Internet Explorer does not treat
  it as an interactive element - without this it will be 'focusable' when using
  the keyboard to navigate. #}
  <svg
    focusable="false"
    role="{{ "img" if params.ariaLabelText else "presentation" }}"
    xmlns="http://www.w3.org/2000/svg"
    {#- The viewbox is tailored to the provided SVG asset logic.
        Full logo: 0 0 323.9 60
        Crown only (cropped): 0 0 72 60 (Approximate logic to hide text space)
    #}
    viewBox="{{ '0 0 323.9 60' if useLogotype else '0 0 72 60' }}"
    height="30"
    width="{{ svgWidth }}"
    fill="currentColor"
    {%- if params.classes %} class="{{ params.classes }}"{% endif %}
    {%- if params.ariaLabelText %} aria-label="{{ params.ariaLabelText }}"{% endif %}
    {{- govukAttributes(params.attributes) }}
  >
    {%- if params.ariaLabelText %}<title>{{ params.ariaLabelText }}</title>{% endif %}
    {{ _tudorCrown | safe | trim | indent(2) }}
    {% if useLogotype %}
      {{ _logotype | safe | trim | indent(2) }}
    {% endif %}
  </svg>
{% endmacro %}