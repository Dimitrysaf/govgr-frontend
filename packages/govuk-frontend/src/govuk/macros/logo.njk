{#- This macro is for interal use within GOV.UK Frontend. It isn't intended for
external use and may receive undocumented breaking changes in non-breaking
releases of Frontend. #}

{% from "./attributes.njk" import govukAttributes %}

{% macro govukLogo(params) %}
  {#- Default options #}
  {%- set useLogotype = params.useLogotype | default(true) %}

  {#- Calculate how wide the logo needs to be for the given parameters.
      The new SVG ViewBox is '0 0 323.9 60'.
      The height is fixed at 30px (display), which is 0.5x the ViewBox height (60).
      Therefore, display width = ViewBox Width / 2.
  #}
  {%- set svgWidth = 36 %} {# Crown only (approximate crop of the left side) #}
  {%- set svgWidth = 162 if useLogotype else svgWidth %} {# Full Logo (323.9 / 2) #}

  {#-
    The SVG content is split into the Crown and the Logotype text.
    Both share the root coordinate transform matrix from the source SVG.
  #}
  {%- set _tudorCrown %}
    <g transform="matrix(.0629 0 0 .06606 1660.448 -33.506)" style="transform-origin:-1628.82px 9.71029px">
      <g transform="matrix(1.91129 0 0 1.83383 -2160.99 367.068)">
        <g transform="translate(7.032 -1.985)">
          <path d="M117.256 109.663h268.593v241.349c.129.848 1.666 16.246-7.188 25.893-10.578 11.525-19.727 3.643-83.598 10.008-35.496 3.538-41.376 25.307-44.98 24.542-1.994-.423.54-23.697-66.112-24.8-48.422-.801-43.021-1.581-56.018-5.24-13.881-3.908-10.697-30.403-10.697-30.403V109.663Z" fill="none" stroke="currentColor" stroke-width="10" stroke-linecap="round" stroke-linejoin="round" />
          <path fill="currentColor" d="M118.014 110.187h100.213v102.44H118.014z"/>
          <path fill="currentColor" d="M287.562 109.703h100.213v102.44H287.562z"/>
          <path fill="currentColor" d="M118.571 281.179h100.213v110.123s-87.014 2.122-98.85-13.22c-11.655-15.108-1.363-96.903-1.363-96.903Z"/>
          <path fill="currentColor" d="m291.897 390.142 94.452-1.087.549-108.795s-81.222 3.988-93.919 13.693c-13.027 9.957-1.082 96.189-1.082 96.189Z" transform="rotate(180 336.896 335.201)"/>
        </g>
        <g transform="translate(7.032 -1.985)">
          <path fill="currentColor" d="M171.638 457.487c16.327 5.635 32 13.745 48.981 16.906 4.057.755 13.897-2.843 10.966-5.748-6.388-6.332-17.018-5.829-25.542-8.699-12.07-4.064-25.428-5.371-36.24-12.102-14.403-8.967-23.822-24.49-37.854-34.028-10.952-7.444-19.843-11.128-32.39-15.363-7.73-2.609-11.91-2.883-27.49-6.927-2.199-.571-15.631-6.565-15.89-5.62-.465 1.701 2.888 14.871 4.215 17.242 7.21 12.886 10.251 16.869 20.706 27.297 12.262 12.23 16.96 21.624 41.959 30.641"/>
          <path fill="currentColor" d="M82.758 311.007c14.57-.15 27.042-9.03 41.733-10.927 2.43-.314-.01 7.317-1.161 9.481-1.053 1.98-7.898 1.204-9.708 2.528-3.347 2.448-6.15 5.567-9.132 8.449-11.423 11.041-20.951 24.372-34.078 33.319-20.227 13.786-41.671 18.357-65.228 16.706-6.102-.428-12.993-.689-17.796-4.475-2.709-2.136 8.602-7.081 12.885-10.644 15.523-12.913 30.38-29.022 46.985-33.542" transform="rotate(90 54.162 325.079)"/>
          <path fill="currentColor" style="transform-origin:104.857px 374.722px" d="M133.9 362.213c14.798-.134 27.466-8.027 42.387-9.714 2.468-.279-.01 6.504-1.179 8.428-1.07 1.761-8.022 1.071-9.86 2.248-3.4 2.176-6.247 4.948-9.275 7.511-11.602 9.814-21.279 21.664-34.612 29.618-20.544 12.255-42.323 16.319-66.249 14.851-6.198-.381-13.197-.613-18.075-3.979-2.751-1.898 8.737-6.294 13.087-9.461 15.766-11.479 30.855-25.799 47.72-29.817" transform="rotate(90 0 0)"/>
          <path fill="currentColor" style="transform-origin:83.057px 196.047px" d="M106.234 226.098c18.225 2.394 41.714 14.905 61.444 22.911 2.078.843-4.667 5.284-6.554 5.706-5.533 1.239-17.714-7.719-23.97-5.692-24.718 8.008-27.139 23.826-57.154 17.846-16.413-3.27-30.891-11.54-45.921-18.902-6.249-3.061-11.966-7.112-17.796-10.911-2.788-1.817 13.07-4.588 19.857-5.817 17.334-3.14 35.457-6.519 51.23-7.822" transform="rotate(90 0 0)"/>
          <path fill="currentColor" style="transform-origin:116.319px 247.621px" d="M136.453 304.522c10.39 5.129 17.083 11.092 27.715 16.06.672.314-3.231 8.401-6.296 7.121-6.819-2.848-16.875-9.678-24.194-10.698-7.297-1.017-13.222 3.025-20.416 1.438-15.769-3.479-30.976-8.672-45.602-15.516-14.437-6.755-19.891-14.193-18.7-14.607 1.552-.539 11.146-3.732 22.546-4.455 12.73-.807 33.373-1.548 45.623 3.12" transform="rotate(90 0 0)"/>
          <path fill="currentColor" style="transform-origin:160.47px 110.916px" d="M181.504 184.898c12.965 12.082 29.413 23.642 40.185 35.327 1.901 2.062-8.957 2.675-11.207 1-3.654-2.72-12.609-8.778-18.919-10.353-18.701-4.666-33.072.543-50.571-7.536-11.519-5.318-24.331-21.002-32.416-30.78-6.068-7.339-12.488-14.768-16.176-23.547-.741-1.764 13.369.216 19.857 1.635 13.297 2.909 29.843 4.032 41.451 10.558" transform="rotate(90 0 0)"/>
          <path fill="currentColor" style="transform-origin:281.208px 69.71px" d="M265.233 157.327c3.936 13.447.886 34.089 4.72 50.583 2.124 9.135 11.805 15.708 12.856 25.028.377 3.34-7.587 1.865-10.077-.393-9.819-8.905-17.043-20.344-24.71-31.157-7.617-10.742-16.595-21.031-21.075-33.414-4.378-12.1-2.434-25.659-4.868-38.294-1.532-7.952-4.704-15.499-6.993-23.268-.737-2.503 12.164 3.478 17.352 6.922 7.825 5.194 16.719 8.874 21.139 18.628" transform="rotate(90 0 0)"/>
          <path fill="currentColor" style="transform-box:fill-box;transform-origin:50% 50%" d="M385.634 403.17c16.327-5.635 32-13.745 48.981-16.906 4.057-.755 13.897 2.843 10.966 5.748-6.388 6.332-17.018 5.829-25.542 8.699-12.07 4.064-25.428 5.371-36.24 12.102-14.403 8.967-23.822 24.49-37.854 34.028-10.952 7.444-19.843 11.128-32.39 15.363-7.73 2.609-11.91 2.883-27.49 6.927-2.199.571-15.631 6.565-15.89 5.62-.465-1.701 2.888-14.871 4.215-17.242 7.21-12.886 10.251-16.869 20.706-27.297 12.262-12.23 16.96-21.624 41.959-30.641" transform="rotate(180 0 0)"/>
          <path fill="currentColor" style="transform-box:fill-box;transform-origin:50% 50%" d="M485.194 351.815c14.679.149 27.244 8.963 42.045 10.846 2.449.312-.01-7.263-1.169-9.411-1.061-1.965-7.957-1.195-9.781-2.509-3.372-2.43-6.196-5.525-9.2-8.386-11.509-10.959-21.108-24.191-34.333-33.071-20.379-13.684-41.983-18.221-65.717-16.582-6.147.425-13.09.684-17.929 4.442-2.729 2.12 8.666 7.028 12.981 10.564 15.64 12.817 30.608 28.807 47.337 33.293" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-origin:397.396px 375.079px" d="M426.656 387.495c14.909.133 27.672 7.968 42.705 9.642 2.486.277-.011-6.455-1.188-8.365-1.078-1.748-8.082-1.063-9.934-2.231-3.426-2.16-6.294-4.912-9.345-7.456-11.688-9.741-21.438-21.503-34.871-29.398-20.697-12.164-42.639-16.197-66.745-14.74-6.244.378-13.295.608-18.21 3.949-2.772 1.884 8.802 6.247 13.185 9.391 15.884 11.394 31.086 25.607 48.077 29.595" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-origin:419.196px 196.404px" d="M442.546 166.576c18.362-2.376 42.027-14.794 61.904-22.74 2.094-.837-4.701-5.245-6.603-5.664-5.574-1.23-17.846 7.662-24.149 5.65-24.903-7.949-27.342-23.649-57.582-17.714-16.536 3.246-31.122 11.455-46.265 18.762-6.296 3.038-12.055 7.059-17.929 10.83-2.809 1.803 13.168 4.554 20.006 5.774 17.463 3.116 35.722 6.47 51.613 7.764" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-origin:385.934px 247.978px" d="M406.218 191.5c10.468-5.091 17.211-11.009 27.923-15.941.677-.311-3.255-8.338-6.343-7.068-6.87 2.827-17.001 9.606-24.375 10.619-7.352 1.009-13.321-3.003-20.569-1.427-15.887 3.453-31.208 8.607-45.944 15.4-14.545 6.705-20.039 14.088-18.84 14.499 1.564.535 11.23 3.704 22.715 4.422 12.826.801 33.623 1.536 45.965-3.097" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-origin:341.783px 111.273px" d="M362.974 37.841c13.062-11.992 29.633-23.466 40.486-35.065 1.915-2.046-9.024-2.655-11.291-.992-3.681 2.7-12.703 8.713-19.06 10.276-18.841 4.631-33.32-.539-50.95 7.48-11.605 5.278-24.513 20.846-32.659 30.551-6.113 7.285-12.581 14.659-16.297 23.372-.746 1.751 13.469-.214 20.006-1.623 13.396-2.887 30.066-4.002 41.761-10.479" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-origin:221.045px 70.067px" d="M204.95-16.899c3.966-13.347.893-33.835 4.756-50.207 2.139-9.067 11.893-15.591 12.952-24.842.38-3.315-7.644-1.851-10.153.39-9.892 8.839-17.17 20.193-24.895 30.926-7.674 10.662-16.719 20.874-21.232 33.165-4.411 12.01-2.453 25.469-4.905 38.01-1.543 7.893-4.739 15.384-7.045 23.095-.743 2.484 12.255-3.452 17.482-6.871 7.883-5.155 16.844-8.808 21.297-18.489" transform="matrix(0 .99257 -1.00749 0 0 0)"/>
          <path fill="currentColor" style="transform-box:fill-box;transform-origin:50% 50%" d="M277.51 477.753c16.327 5.635 32 13.745 48.981 16.906 4.057.755 13.897-2.843 10.966-5.748-6.388-6.332-17.018-5.829-25.542-8.699-12.07-4.064-25.428-5.371-36.24-12.102-14.403-8.967-23.822-24.49-37.854-34.028-10.952-7.444-19.843-11.128-32.39-15.363-7.73-2.609-11.91-2.883-27.49-6.927-2.199-.571-15.631-6.565-15.89-5.62-.465 1.701 2.888 14.871 4.215 17.242 7.21 12.886 10.251 16.869 20.706 27.297 12.262 12.23 16.96 21.624 41.959 30.641"/>
          <path fill="currentColor" style="transform-origin:250.001px 454.526px" d="M277.511 427.189c16.327-5.635 32-13.745 48.981-16.906 4.057-.755 13.897 2.843 10.966 5.748-6.388 6.332-17.018 5.829-25.542 8.699-12.07 4.064-25.428 5.371-36.24 12.102-14.403 8.967-23.822 24.49-37.854 34.028-10.952 7.444-19.843 11.128-32.39 15.363-7.73 2.609-11.91 2.883-27.49 6.927-2.199.571-15.631 6.565-15.89 5.62-.465-1.701 2.888-14.871 4.215-17.242 7.21-12.886 10.251-16.869 20.706-27.297 12.262-12.23 16.96-21.624 41.959-30.641" transform="rotate(180 0 0)"/>
        </g>
      </g>
    </g>
  {%- endset %}

  {%- set _logotype %}
    <g transform="matrix(.0629 0 0 .06606 1660.448 -33.506)" style="transform-origin:-1628.82px 9.71029px">
      <g transform="matrix(15.89623 0 0 15.13867 926.792 787.388)" style="transform-origin:98.059px 154.655px">
        <path fill="currentColor" d="M-7.967 159.8c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21 1.4.8 3.21 1.2 5.22 1.2s3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01.21-1 .4-2.01.4-3.01v.14H2.253v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2-1.2.4-2.41.4-3.81.4a18.562 18.562 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02-.8-2.61-1.4-5.62-1.4-8.83s.4-6.023 1.4-8.833a20.456 20.456 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21 1.2 1.2 2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.813-.6 3.713-.6 5.423s.8 5.22.8 5.22l.01.01Z"/>
        <path fill="currentColor" d="M49.833 131.897c3.21 0 6.22.6 8.63 1.81 2.41 1.2 4.82 2.81 6.62 4.82 1.8 2.01 3.21 4.41 4.01 7.02.8 2.61 1.4 5.623 1.4 8.833s-.4 6.02-1.4 8.83c-1 2.81-2.41 5.02-4.01 7.02-1.6 2-4.01 3.61-6.62 4.82-2.61 1.21-5.42 1.81-8.63 1.81-3.21 0-6.22-.6-8.63-1.81-2.41-1.21-4.82-2.81-6.42-4.82-1.6-2.01-3.21-4.41-4.01-7.02-.8-2.61-1.4-5.62-1.4-8.83s.4-6.023 1.4-8.833c1-2.81 2.41-5.02 4.01-7.02 1.6-2 4.01-3.61 6.42-4.82 2.41-1.21 5.42-1.81 8.63-1.81Zm0 36.733c1.81 0 3.61-.4 5.02-1 1.41-.6 2.61-1.81 3.61-3.01 1-1.2 1.81-2.81 2.21-4.41.4-1.81.8-3.61.8-5.62 0-2.21-.2-4.21-.8-6.023-.6-1.81-1.2-3.21-2.21-4.62-1-1.2-2.21-2.21-3.61-3.01-1.4-.8-3.21-1-5.02-1-1.81 0-3.61.4-5.02 1-1.4.8-2.61 1.81-3.61 3.01-1 1.2-1.81 2.81-2.21 4.62-.4 1.813-.8 3.613-.8 5.623 0 2.41.2 4.21.8 6.02.4 1.81 1.2 3.21 2.21 4.41 1.01 1.2 2.21 2.21 3.61 3.01 1.4.8 3.21 1 5.02 1Z"/>
        <path fill="currentColor" d="m86.153 176.59-12.24-44.153h9.83l8.43 32.773h.4l8.23-32.773h9.83l-12.24 44.153h-12.24Z"/>
        <circle class="govuk-logo-dot" fill="currentColor" cx="123.174" cy="153.507" r="7.3"/>
        <path fill="currentColor" d="M148.033 159.8c.4 1.81 1.2 3.21 2.21 4.62 1 1.4 2.21 2.41 3.61 3.21 1.4.8 3.21 1.2 5.22 1.2s3.61-.4 4.82-1c1.4-.6 2.41-1.4 3.21-2.41.8-1 1.4-2.01 1.61-3.01.21-1 .4-2.01.4-3.01v.14h-10.86v-7.02h20.07v24.08h-8.03v-5.56c-.6.8-1.38 1.61-2.19 2.41-.8.8-1.81 1.2-2.81 1.81-1 .4-2.21.8-3.41 1.2-1.2.4-2.41.4-3.81.4a18.562 18.562 0 0 1-14.65-6.63c-1.6-2.01-3.01-4.41-3.81-7.02-.8-2.61-1.4-5.62-1.4-8.83s.4-6.023 1.4-8.833a20.456 20.456 0 0 1 19.46-13.65c3.21 0 4.01.2 5.82.8 1.81.4 3.61 1.2 5.02 2.01 1.61.8 2.81 2.01 4.01 3.21 1.2 1.2 2.21 2.61 2.81 4.21l-7.63 4.41c-.4-1-1-1.81-1.61-2.61-.6-.8-1.4-1.4-2.21-2.01-.8-.6-1.81-1-2.81-1.4-1-.4-2.21-.4-3.61-.4-2.01 0-3.81.4-5.22 1.2-1.4.8-2.61 1.81-3.61 3.21s-1.61 2.81-2.21 4.62c-.4 1.813-.6 3.713-.6 5.423s.8 5.22.8 5.22l.01.01Z"/>
        <path fill="currentColor" d="M185.883 132.447h22.935c9 0 10.954 4.803 10.954 12.803 0 7-1.192 11.765-10.192 12.146l13.814 19.096c.044 0-4.877-.038-10.676-.038l-11.63-18.931-6.375-.127V176.6h-8.83v-44.153Zm8.83 7.949v9h12.105c3 0 3.454-1.854 3.454-4.354s-.454-4.646-3.454-4.646h-12.105Z"/>
      </g>
    </g>
  {%- endset %}

  {#- The SVG needs `focusable="false"` so that Internet Explorer does not treat
  it as an interactive element - without this it will be 'focusable' when using
  the keyboard to navigate. #}
  <svg
    focusable="false"
    role="{{ "img" if params.ariaLabelText else "presentation" }}"
    xmlns="http://www.w3.org/2000/svg"
    {#- The viewbox is tailored to the provided SVG asset logic.
        Full logo: 0 0 323.9 60
        Crown only (cropped): 0 0 72 60 (Approximate logic to hide text space)
    #}
    viewBox="{{ '0 0 323.9 60' if useLogotype else '0 0 72 60' }}"
    height="30"
    width="{{ svgWidth }}"
    fill="currentColor"
    {%- if params.classes %} class="{{ params.classes }}"{% endif %}
    {%- if params.ariaLabelText %} aria-label="{{ params.ariaLabelText }}"{% endif %}
    {{- govukAttributes(params.attributes) }}
  >
    {%- if params.ariaLabelText %}<title>{{ params.ariaLabelText }}</title>{% endif %}
    {{ _tudorCrown | safe | trim | indent(2) }}
    {% if useLogotype %}
      {{ _logotype | safe | trim | indent(2) }}
    {% endif %}
  </svg>
{% endmacro %}